<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Haraka Deliveries - Fast Nairobi Delivery</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        :root {
            --primary: #FF6B00;
            --secondary: #00A859;
            --accent: #FFD700;
            --dark: #1A1A1A;
            --light: #F5F5F5;
            --gray: #E0E0E0;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --success: #00B894;
            --warning: #FBC531;
            --danger: #E84118;
            --info: #0984e3;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background-color: white;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-icon {
            color: var(--primary);
            font-size: 24px;
        }

        .logo-text {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
        }

        .logo-text span {
            color: var(--secondary);
        }

        .nav-links {
            display: flex;
            gap: 25px;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .auth-buttons {
            display: flex;
            gap: 15px;
        }

        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            font-size: 14px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: #e05a00;
            transform: translateY(-2px);
        }

        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background-color: var(--primary);
            color: white;
        }

        .btn-secondary {
            background-color: var(--secondary);
            color: white;
        }

        .btn-secondary:hover {
            background-color: #008a47;
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 12px;
        }

        .btn-block {
            width: 100%;
        }

        .btn-large {
            padding: 12px 24px;
            font-size: 16px;
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--dark);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 80px 0;
            text-align: center;
        }

        .hero h1 {
            font-size: 48px;
            margin-bottom: 20px;
        }

        .hero p {
            font-size: 20px;
            max-width: 700px;
            margin: 0 auto 30px;
        }

        .hero-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        /* Features Section */
        .features {
            padding: 80px 0;
            background-color: white;
        }

        .section-title {
            text-align: center;
            margin-bottom: 50px;
            font-size: 36px;
            color: var(--dark);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .feature-card {
            background-color: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--shadow);
            text-align: center;
            transition: transform 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-10px);
        }

        .feature-icon {
            font-size: 48px;
            color: var(--primary);
            margin-bottom: 20px;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: white;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            padding: 30px;
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
            color: var(--dark);
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--gray);
        }

        .auth-tab {
            padding: 10px 20px;
            cursor: pointer;
            font-weight: 600;
        }

        .auth-tab.active {
            border-bottom: 3px solid var(--primary);
            color: var(--primary);
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--gray);
            border-radius: 8px;
            font-size: 16px;
        }

        /* Dashboard Styles */
        .dashboard {
            display: none;
            min-height: 100vh;
        }

        .dashboard-header {
            background-color: white;
            box-shadow: var(--shadow);
            padding: 20px 0;
        }

        .dashboard-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .dashboard-content {
            padding: 40px 0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background-color: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: var(--shadow);
            text-align: center;
        }

        .stat-value {
            font-size: 36px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .stat-label {
            color: var(--dark);
            font-weight: 500;
        }

        /* Products Grid */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 25px;
        }

        .product-card {
            background-color: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.3s;
        }

        .product-card:hover {
            transform: translateY(-5px);
        }

        .product-image {
            height: 200px;
            background-color: var(--gray);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--dark);
            background-size: cover;
            background-position: center;
        }

        .product-info {
            padding: 20px;
        }

        .product-price {
            font-size: 20px;
            font-weight: 700;
            color: var(--primary);
            margin: 10px 0;
        }

        /* Footer Styles */
        footer {
            background-color: var(--dark);
            color: white;
            padding: 60px 0 20px;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-logo {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .footer-links h4 {
            margin-bottom: 20px;
            font-size: 18px;
        }

        .footer-links ul {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 10px;
        }

        .footer-links a {
            color: #ccc;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-links a:hover {
            color: var(--primary);
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-link {
            width: 40px;
            height: 40px;
            background-color: #333;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s;
        }

        .social-link:hover {
            background-color: var(--primary);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #333;
            color: #ccc;
        }

        /* Enhanced Dashboard Styles */
        .customer-dashboard {
            background-color: var(--light);
            min-height: 100vh;
            padding-top: 80px;
        }

        .customer-nav {
            background-color: white;
            box-shadow: var(--shadow);
            padding: 15px 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }

        .customer-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .customer-stat-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--primary);
        }

        .customer-stat-value {
            font-size: 32px;
            font-weight: bold;
            color: var(--dark);
            margin-bottom: 5px;
        }

        .customer-stat-label {
            color: var(--gray);
            font-size: 14px;
        }

        .customer-products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .customer-product-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--shadow);
            border: 1px solid var(--gray);
        }

        .customer-product-price {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary);
            margin: 10px 0;
        }

        .customer-product-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        /* Notification Styles */
        .notification {
            position: fixed;
            top: 100px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            background: white;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 3000;
            transform: translateX(150%);
            transition: transform 0.3s ease;
            max-width: 400px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification-success {
            border-left: 4px solid var(--success);
        }

        .notification-error {
            border-left: 4px solid var(--danger);
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .nav-links, .auth-buttons {
                display: none;
            }

            .mobile-menu-btn {
                display: block;
            }

            .hero h1 {
                font-size: 36px;
            }

            .hero p {
                font-size: 18px;
            }

            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }

            .customer-products-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Chat Support */
        .chat-widget {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        .chat-toggle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .chat-container {
            position: absolute;
            bottom: 70px;
            right: 0;
            width: 350px;
            height: 450px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: none;
            flex-direction: column;
            overflow: hidden;
        }

        .chat-container.open {
            display: flex;
        }

        .chat-header {
            background: var(--primary);
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .message {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 18px;
            margin-bottom: 10px;
        }

        .message.user {
            align-self: flex-end;
            background: var(--primary);
            color: white;
        }

        .message.bot {
            align-self: flex-start;
            background: var(--gray);
            color: var(--dark);
        }

        .chat-input {
            display: flex;
            padding: 15px;
            border-top: 1px solid var(--gray);
        }

        .chat-input input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid var(--gray);
            border-radius: 20px;
            outline: none;
        }

        .chat-input button {
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            margin-left: 10px;
            cursor: pointer;
        }

        /* Order Status Badges */
        .status-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-pending { background: var(--warning); color: white; }
        .status-accepted { background: var(--info); color: white; }
        .status-picked { background: var(--primary); color: white; }
        .status-delivered { background: var(--success); color: white; }
        .status-cancelled { background: var(--danger); color: white; }

        /* Order Tracking */
        .tracking-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: var(--shadow);
        }

        .tracking-steps {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            position: relative;
        }

        .tracking-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            z-index: 2;
        }

        .step-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--gray);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
            transition: all 0.3s;
        }

        .step-icon.active {
            background: var(--primary);
            color: white;
        }

        .step-icon.completed {
            background: var(--success);
            color: white;
        }
    </style>
</head>
<body>
    <!-- Notification Area -->
    <div id="notificationArea"></div>

    <!-- Chat Support Widget -->
    <div class="chat-widget">
        <div class="chat-toggle" id="chatToggle">
            <i class="fas fa-comments"></i>
        </div>
        <div class="chat-container" id="chatContainer">
            <div class="chat-header">
                <h3>Support Chat</h3>
                <button class="btn btn-sm" id="closeChat">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="chat-messages" id="chatMessages">
                <div class="message bot">
                    Hello! Welcome to Haraka Deliveries. How can I assist you with your delivery needs today?
                </div>
            </div>
            <div class="chat-input">
                <input type="text" id="chatInput" placeholder="Type your message...">
                <button id="sendMessage">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Landing Page -->
    <div id="landing-page" class="page active">
        <header>
            <div class="container">
                <div class="header-content">
                    <div class="logo">
                        <i class="fas fa-truck-fast logo-icon"></i>
                        <div class="logo-text">Haraka<span>Deliveries</span></div>
                    </div>
                    <nav class="nav-links">
                        <a href="#features">How It Works</a>
                        <a href="#about">About</a>
                        <a href="#contact">Contact</a>
                        <a href="#" onclick="showPage('help-center')">Help Center</a>
                    </nav>
                    <div class="auth-buttons">
                        <button class="btn btn-outline" id="login-btn">Login</button>
                        <button class="btn btn-primary" id="signup-btn">Sign Up</button>
                    </div>
                    <button class="mobile-menu-btn" id="mobile-menu-toggle">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </header>

        <section class="hero">
            <div class="container">
                <h1>Fast Delivery Across Nairobi</h1>
                <p>Get your products delivered quickly and reliably with our network of trusted riders. From Westlands to Eastleigh, we've got you covered!</p>
                <div class="hero-buttons">
                    <button class="btn btn-primary btn-large" id="get-started-btn">Get Started</button>
                    <button class="btn btn-outline btn-large" onclick="showAuthModal('signup')">Become a Rider</button>
                </div>
            </div>
        </section>

        <section class="features" id="features">
            <div class="container">
                <h2 class="section-title">How Haraka Deliveries Works</h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <i class="fas fa-store feature-icon"></i>
                        <h3>Shop Local</h3>
                        <p>Browse products from sellers across Nairobi and place your order with ease.</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-motorcycle feature-icon"></i>
                        <h3>Fast Delivery</h3>
                        <p>Our riders will pick up and deliver your order in record time across the city.</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-map-marker-alt feature-icon"></i>
                        <h3>Live Tracking</h3>
                        <p>Track your delivery in real-time from pickup to your doorstep.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section class="features" id="contact">
            <div class="container">
                <h2 class="section-title">Contact Us</h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <i class="fas fa-phone feature-icon"></i>
                        <h3>Call Us</h3>
                        <p>+254 748 894 671</p>
                        <p style="color: var(--gray); margin-top: 10px;">Available 24/7</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-envelope feature-icon"></i>
                        <h3>Email Us</h3>
                        <p>support@harakadeliveries.com</p>
                        <p style="color: var(--gray); margin-top: 10px;">Quick response guaranteed</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-map-marker-alt feature-icon"></i>
                        <h3>Visit Us</h3>
                        <p>Nairobi, Kenya</p>
                        <p style="color: var(--gray); margin-top: 10px;">Multiple locations across the city</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Customer Dashboard -->
    <div id="customer-dashboard" class="dashboard">
        <div class="customer-dashboard">
            <div class="customer-nav">
                <div class="container">
                    <div class="dashboard-nav">
                        <div class="logo">
                            <i class="fas fa-truck-fast logo-icon"></i>
                            <div class="logo-text">Haraka<span>Deliveries</span></div>
                        </div>
                        <div class="user-info">
                            <div class="user-avatar" id="customer-avatar">JD</div>
                            <span id="customer-name">John Doe</span>
                            <button class="btn btn-outline" id="customer-logout">Logout</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="container">
                <div class="dashboard-content">
                    <h2 class="section-title">üõçÔ∏è Customer Dashboard</h2>
                    
                    <div class="customer-stats-grid" id="customer-stats">
                        <div class="customer-stat-card">
                            <div class="customer-stat-value">0</div>
                            <div class="customer-stat-label">Total Orders</div>
                        </div>
                        <div class="customer-stat-card">
                            <div class="customer-stat-value">0</div>
                            <div class="customer-stat-label">Pending Orders</div>
                        </div>
                        <div class="customer-stat-card">
                            <div class="customer-stat-value">0</div>
                            <div class="customer-stat-label">Delivered Orders</div>
                        </div>
                    </div>

                    <h3 style="margin: 30px 0 20px 0;">Available Products</h3>
                    <div class="customer-products-grid" id="products-list">
                        <!-- Products loaded dynamically -->
                    </div>

                    <div id="customer-orders-section" style="display: none;">
                        <h3 style="margin: 40px 0 20px 0;">Your Orders</h3>
                        <div id="customer-orders">
                            <!-- Orders loaded dynamically -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Rider Dashboard -->
    <div id="rider-dashboard" class="dashboard">
        <div class="customer-dashboard">
            <div class="customer-nav">
                <div class="container">
                    <div class="dashboard-nav">
                        <div class="logo">
                            <i class="fas fa-truck-fast logo-icon"></i>
                            <div class="logo-text">Haraka<span>Deliveries</span></div>
                        </div>
                        <div class="user-info">
                            <div class="user-avatar" id="rider-avatar">RJ</div>
                            <span id="rider-name">Rider James</span>
                            <button class="btn btn-outline" id="rider-logout">Logout</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="container">
                <div class="dashboard-content">
                    <h2 class="section-title">üö¥‚Äç‚ôÇÔ∏è Rider Dashboard</h2>
                    
                    <div class="customer-stats-grid">
                        <div class="customer-stat-card">
                            <div class="customer-stat-value">0</div>
                            <div class="customer-stat-label">Active Deliveries</div>
                        </div>
                        <div class="customer-stat-card">
                            <div class="customer-stat-value">KSh 0</div>
                            <div class="customer-stat-label">Today's Earnings</div>
                        </div>
                        <div class="customer-stat-card">
                            <div class="customer-stat-value">0%</div>
                            <div class="customer-stat-label">Completion Rate</div>
                        </div>
                    </div>

                    <div class="tracking-container">
                        <h3>Available Deliveries</h3>
                        <div id="available-deliveries">
                            <!-- Deliveries loaded dynamically -->
                        </div>
                    </div>

                    <div class="tracking-container" id="active-delivery-section" style="display: none;">
                        <h3>Active Delivery</h3>
                        <div id="active-delivery">
                            <!-- Active delivery loaded dynamically -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div class="modal" id="auth-modal">
        <div class="modal-content">
            <span class="close-modal" id="close-modal">&times;</span>
            <div class="auth-tabs">
                <div class="auth-tab active" data-tab="login">Login</div>
                <div class="auth-tab" data-tab="signup">Sign Up</div>
            </div>

            <div class="auth-form active" id="login-form">
                <div class="form-group">
                    <label for="login-email">Email</label>
                    <input type="email" id="login-email" class="form-control" placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" class="form-control" placeholder="Your password">
                </div>
                <button class="btn btn-primary btn-block" id="login-submit">Login</button>
            </div>

            <div class="auth-form" id="signup-form">
                <div class="form-group">
                    <label for="signup-name">Full Name</label>
                    <input type="text" id="signup-name" class="form-control" placeholder="Your full name">
                </div>
                <div class="form-group">
                    <label for="signup-email">Email</label>
                    <input type="email" id="signup-email" class="form-control" placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label for="signup-password">Password</label>
                    <input type="password" id="signup-password" class="form-control" placeholder="Create a password">
                </div>
                <div class="form-group">
                    <label for="signup-phone">Phone Number</label>
                    <input type="tel" id="signup-phone" class="form-control" placeholder="+254 XXX XXX XXX">
                </div>
                <div class="form-group">
                    <label for="signup-role">I am a:</label>
                    <select id="signup-role" class="form-control">
                        <option value="customer">Customer</option>
                        <option value="rider">Rider</option>
                    </select>
                </div>
                <button class="btn btn-primary btn-block" id="signup-submit">Create Account</button>
            </div>
        </div>
    </div>

    <!-- Order Modal -->
    <div class="modal" id="order-modal">
        <div class="modal-content">
            <span class="close-modal" id="close-order-modal">&times;</span>
            <h3>Place Your Order</h3>
            <div id="order-product-info"></div>
            
            <div class="form-group">
                <label for="delivery-address">Delivery Address</label>
                <input type="text" id="delivery-address" class="form-control" placeholder="Enter your delivery address in Nairobi">
            </div>
            
            <div class="form-group">
                <label for="delivery-notes">Special Instructions</label>
                <textarea id="delivery-notes" class="form-control" placeholder="Any special instructions for the rider..." rows="3"></textarea>
            </div>
            
            <div class="form-group">
                <label>Payment Method</label>
                <div style="display: flex; gap: 10px; margin-top: 10px;">
                    <button class="btn btn-outline" style="flex: 1;" onclick="selectPayment('mpesa')">
                        <i class="fas fa-mobile-alt"></i> M-Pesa
                    </button>
                    <button class="btn btn-outline" style="flex: 1;" onclick="selectPayment('cash')">
                        <i class="fas fa-money-bill"></i> Cash
                    </button>
                </div>
            </div>
            
            <button class="btn btn-primary btn-block" id="confirm-order">Place Order - KSh <span id="order-total">0</span></button>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div>
                    <div class="footer-logo">
                        <i class="fas fa-truck-fast"></i>
                        HarakaDeliveries
                    </div>
                    <p class="text-gray-400">
                        Fast, reliable delivery services across Nairobi. Connecting sellers, customers, and riders.
                    </p>
                    <div class="social-links">
                        <a href="#" class="social-link">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                    </div>
                </div>
                
                <div class="footer-links">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="#features">Services</a></li>
                        <li><a href="#contact">Contact</a></li>
                        <li><a href="#" onclick="showAuthModal('signup')">Become a Rider</a></li>
                    </ul>
                </div>
                
                <div class="footer-links">
                    <h4>Contact Info</h4>
                    <ul class="text-gray-400">
                        <li>+254 748 894 671</li>
                        <li>support@harakadeliveries.com</li>
                        <li>Nairobi, Kenya</li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 Haraka Deliveries. Nairobi, Kenya. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // ========== PRODUCTION APPLICATION ==========
        let currentUser = null;
        let currentRole = null;
        let currentOrder = null;
        let selectedPaymentMethod = 'cash';
        let chatOpen = false;

        // Production data - Real products for Nairobi delivery
        const products = [
            {
                id: 'prod1',
                name: 'Fresh Groceries Package',
                description: 'Fresh vegetables, fruits, and essentials from local markets',
                price: 1200,
                category: 'food',
                deliveryFee: 150,
                estimatedTime: '30-45 mins',
                image: 'üõí'
            },
            {
                id: 'prod2',
                name: 'Premium Coffee Beans',
                description: 'Freshly roasted Kenyan AA coffee beans - 500g package',
                price: 850,
                category: 'food',
                deliveryFee: 120,
                estimatedTime: '25-40 mins',
                image: '‚òï'
            },
            {
                id: 'prod3',
                name: 'Emergency Pharmacy Kit',
                description: 'Basic medical supplies: painkillers, bandages, antiseptic',
                price: 1500,
                category: 'health',
                deliveryFee: 200,
                estimatedTime: '15-25 mins',
                image: 'üíä'
            },
            {
                id: 'prod4',
                name: 'Office Supplies Package',
                description: 'Pens, notebooks, stapler, paper clips, and printer paper',
                price: 800,
                category: 'office',
                deliveryFee: 100,
                estimatedTime: '35-50 mins',
                image: 'üìé'
            },
            {
                id: 'prod5',
                name: 'Phone Charger & Cable',
                description: 'Universal phone charger with USB-C and Lightning cables',
                price: 600,
                category: 'electronics',
                deliveryFee: 120,
                estimatedTime: '20-35 mins',
                image: 'üîå'
            },
            {
                id: 'prod6',
                name: 'Bakery Fresh Bread',
                description: 'Assortment of freshly baked bread and pastries',
                price: 450,
                category: 'food',
                deliveryFee: 100,
                estimatedTime: '20-30 mins',
                image: 'üçû'
            }
        ];

        // Nairobi areas for delivery
        const nairobiAreas = [
            'Westlands', 'CBD', 'Karen', 'Langata', 'Kileleshwa', 'Lavington',
            'Kilimani', 'South B', 'South C', 'Eastleigh', 'Embakasi', 'Dagoretti',
            'Kasarani', 'Ruiru', 'Thika Road', 'Mombasa Road'
        ];

        // ========== INITIALIZATION ==========
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            // Check for existing user session
            const savedUser = localStorage.getItem('harakaUser');
            const savedOrders = localStorage.getItem('harakaOrders');
            
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                currentRole = currentUser.role;
                showDashboard(currentRole);
            }

            // Initialize data if not exists
            if (!savedOrders) {
                localStorage.setItem('harakaOrders', JSON.stringify([]));
            }
            if (!localStorage.getItem('harakaRiders')) {
                localStorage.setItem('harakaRiders', JSON.stringify([]));
            }

            setupEventListeners();
            initializeChat();
            loadProducts();
        }

        function setupEventListeners() {
            // Auth event listeners
            document.getElementById('login-btn').addEventListener('click', () => showAuthModal('login'));
            document.getElementById('signup-btn').addEventListener('click', () => showAuthModal('signup'));
            document.getElementById('get-started-btn').addEventListener('click', () => showAuthModal('signup'));
            document.getElementById('close-modal').addEventListener('click', hideAuthModal);
            document.getElementById('close-order-modal').addEventListener('click', hideOrderModal);
            
            // Auth tabs
            document.querySelectorAll('.auth-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabName = tab.getAttribute('data-tab');
                    switchAuthTab(tabName);
                });
            });

            // Auth form submissions
            document.getElementById('login-submit').addEventListener('click', handleLogin);
            document.getElementById('signup-submit').addEventListener('click', handleSignup);
            
            // Logout buttons
            document.getElementById('customer-logout').addEventListener('click', handleLogout);
            document.getElementById('rider-logout').addEventListener('click', handleLogout);

            // Order management
            document.getElementById('confirm-order').addEventListener('click', handleOrderConfirmation);

            // Chat functionality
            document.getElementById('chatToggle').addEventListener('click', toggleChat);
            document.getElementById('closeChat').addEventListener('click', toggleChat);
            document.getElementById('sendMessage').addEventListener('click', sendChatMessage);
            document.getElementById('chatInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') sendChatMessage();
            });

            // Close modals when clicking outside
            window.addEventListener('click', (event) => {
                if (event.target === document.getElementById('auth-modal')) hideAuthModal();
                if (event.target === document.getElementById('order-modal')) hideOrderModal();
            });

            // Mobile menu
            document.getElementById('mobile-menu-toggle').addEventListener('click', toggleMobileMenu);
        }

        function initializeChat() {
            addChatMessage('bot', 'Hello! Welcome to Haraka Deliveries. How can I assist you with your delivery needs today?');
        }

        // ========== AUTHENTICATION FUNCTIONS ==========
        function handleLogin() {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;

            if (!email || !password) {
                showNotification('Please fill in all fields', 'error');
                return;
            }

            if (!validateEmail(email)) {
                showNotification('Please enter a valid email address', 'error');
                return;
            }

            // In production, this would verify against a database
            // For GitHub Pages, we use localStorage
            currentUser = {
                id: 'user_' + Date.now(),
                name: email.split('@')[0],
                email: email,
                phone: '+254700000000',
                role: 'customer',
                joined: new Date().toISOString(),
                address: 'Nairobi, Kenya'
            };

            localStorage.setItem('harakaUser', JSON.stringify(currentUser));
            hideAuthModal();
            showNotification('Login successful! Welcome to Haraka Deliveries', 'success');
            showDashboard('customer');
        }

        function handleSignup() {
            const name = document.getElementById('signup-name').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            const phone = document.getElementById('signup-phone').value;
            const role = document.getElementById('signup-role').value;

            if (!name || !email || !password || !phone) {
                showNotification('Please fill in all fields', 'error');
                return;
            }

            if (!validateEmail(email)) {
                showNotification('Please enter a valid email address', 'error');
                return;
            }

            if (password.length < 6) {
                showNotification('Password must be at least 6 characters long', 'error');
                return;
            }

            if (!phone.startsWith('+254') || phone.length !== 13) {
                showNotification('Please enter a valid Kenyan phone number starting with +254', 'error');
                return;
            }

            // Create user account
            currentUser = {
                id: 'user_' + Date.now(),
                name: name,
                email: email,
                phone: phone,
                role: role,
                joined: new Date().toISOString(),
                rating: role === 'rider' ? 4.8 : null,
                address: 'Nairobi, Kenya'
            };

            localStorage.setItem('harakaUser', JSON.stringify(currentUser));
            
            if (role === 'rider') {
                // Add rider to riders list
                const riders = JSON.parse(localStorage.getItem('harakaRiders') || '[]');
                riders.push({
                    ...currentUser,
                    isOnline: true,
                    deliveriesCompleted: 0,
                    totalEarnings: 0
                });
                localStorage.setItem('harakaRiders', JSON.stringify(riders));
            }

            hideAuthModal();
            showNotification(`Account created successfully! Welcome to Haraka ${role} network`, 'success');
            showDashboard(role);
        }

        function handleLogout() {
            Swal.fire({
                title: 'Logout?',
                text: 'Are you sure you want to logout?',
                icon: 'question',
                showCancelButton: true,
                confirmButtonText: 'Yes, Logout',
                cancelButtonText: 'Cancel'
            }).then((result) => {
                if (result.isConfirmed) {
                    currentUser = null;
                    currentRole = null;
                    localStorage.removeItem('harakaUser');
                    showPage('landing-page');
                    showNotification('Logged out successfully', 'success');
                }
            });
        }

        // ========== DASHBOARD FUNCTIONS ==========
        function showDashboard(role) {
            switch(role) {
                case 'customer':
                    showPage('customer-dashboard');
                    document.getElementById('customer-name').textContent = currentUser.name;
                    document.getElementById('customer-avatar').textContent = 
                        currentUser.name.split(' ').map(n => n[0]).join('').toUpperCase();
                    loadCustomerDashboard();
                    break;
                case 'rider':
                    showPage('rider-dashboard');
                    document.getElementById('rider-name').textContent = currentUser.name;
                    document.getElementById('rider-avatar').textContent = 
                        currentUser.name.split(' ').map(n => n[0]).join('').toUpperCase();
                    loadRiderDashboard();
                    break;
            }
        }

        function loadCustomerDashboard() {
            const orders = JSON.parse(localStorage.getItem('harakaOrders') || '[]');
            const userOrders = orders.filter(order => order.customerId === currentUser.id);
            
            // Update stats
            document.querySelector('#customer-stats .customer-stat-card:nth-child(1) .customer-stat-value').textContent = userOrders.length;
            document.querySelector('#customer-stats .customer-stat-card:nth-child(2) .customer-stat-value').textContent = 
                userOrders.filter(order => order.status === 'pending' || order.status === 'accepted').length;
            document.querySelector('#customer-stats .customer-stat-card:nth-child(3) .customer-stat-value').textContent = 
                userOrders.filter(order => order.status === 'delivered').length;
            
            loadProducts();
            loadCustomerOrders(userOrders);
        }

        function loadRiderDashboard() {
            const orders = JSON.parse(localStorage.getItem('harakaOrders') || '[]');
            const riderOrders = orders.filter(order => order.riderId === currentUser.id);
            const pendingOrders = orders.filter(order => order.status === 'pending');
            
            // Update stats
            document.querySelector('.customer-stat-card:nth-child(1) .customer-stat-value').textContent = 
                riderOrders.filter(order => order.status === 'accepted' || order.status === 'picked').length;
            
            const todayEarnings = riderOrders
                .filter(order => order.status === 'delivered' && isToday(new Date(order.deliveredAt)))
                .reduce((sum, order) => sum + order.deliveryFee, 0);
            document.querySelector('.customer-stat-card:nth-child(2) .customer-stat-value').textContent = 
                'KSh ' + todayEarnings.toLocaleString();
            
            const completed = riderOrders.filter(order => order.status === 'delivered').length;
            const total = riderOrders.length;
            const completionRate = total > 0 ? Math.round((completed / total) * 100) : 0;
            document.querySelector('.customer-stat-card:nth-child(3) .customer-stat-value').textContent = 
                completionRate + '%';
            
            loadAvailableDeliveries(pendingOrders);
            loadActiveDelivery(riderOrders);
        }

        function loadProducts() {
            const productsList = document.getElementById('products-list');
            productsList.innerHTML = '';
            
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'customer-product-card';
                
                productCard.innerHTML = `
                    <div class="product-image" style="background: linear-gradient(45deg, #FF6B00, #FFD700); display: flex; align-items: center; justify-content: center; color: white; font-size: 48px;">
                        ${product.image}
                    </div>
                    <h3>${product.name}</h3>
                    <p style="color: var(--gray); font-size: 14px; margin: 10px 0;">${product.description}</p>
                    <div class="customer-product-price">KSh ${product.price.toLocaleString()}</div>
                    <p style="color: var(--success); font-size: 12px; margin: 5px 0;">
                        <i class="fas fa-clock"></i> ${product.estimatedTime}
                    </p>
                    <p style="color: var(--info); font-size: 12px; margin: 5px 0;">
                        <i class="fas fa-shipping-fast"></i> Delivery: KSh ${product.deliveryFee}
                    </p>
                    <div class="customer-product-actions">
                        <button class="btn btn-primary" onclick="orderProduct('${product.id}')">
                            <i class="fas fa-shopping-cart"></i> Order Now
                        </button>
                        <button class="btn btn-outline" onclick="viewProduct('${product.id}')">
                            <i class="fas fa-info-circle"></i> Details
                        </button>
                    </div>
                `;
                
                productsList.appendChild(productCard);
            });
        }

        function loadCustomerOrders(userOrders) {
            const ordersSection = document.getElementById('customer-orders-section');
            const ordersContainer = document.getElementById('customer-orders');
            
            if (userOrders.length === 0) {
                ordersSection.style.display = 'none';
                return;
            }
            
            ordersSection.style.display = 'block';
            ordersContainer.innerHTML = '';
            
            userOrders.slice(0, 5).forEach(order => {
                const orderCard = document.createElement('div');
                orderCard.className = 'customer-product-card';
                orderCard.style.cursor = 'pointer';
                orderCard.onclick = () => viewOrderDetails(order.id);
                
                orderCard.innerHTML = `
                    <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 15px;">
                        <h4 style="margin: 0;">${order.product}</h4>
                        <span class="status-badge status-${order.status}">${order.status}</span>
                    </div>
                    <p style="color: var(--gray); margin: 5px 0;"><strong>Order ID:</strong> ${order.id}</p>
                    <p style="color: var(--gray); margin: 5px 0;"><strong>Total:</strong> KSh ${order.total.toLocaleString()}</p>
                    <p style="color: var(--gray); margin: 5px 0;"><strong>Placed:</strong> ${formatDate(order.createdAt)}</p>
                    ${order.rider ? `<p style="color: var(--info); margin: 5px 0;"><strong>Rider:</strong> ${order.rider}</p>` : ''}
                `;
                
                ordersContainer.appendChild(orderCard);
            });
        }

        function loadAvailableDeliveries(pendingOrders) {
            const deliveriesContainer = document.getElementById('available-deliveries');
            
            if (pendingOrders.length === 0) {
                deliveriesContainer.innerHTML = `
                    <div class="customer-product-card">
                        <p style="text-align: center; color: var(--gray);">No available deliveries at the moment</p>
                    </div>
                `;
                return;
            }
            
            deliveriesContainer.innerHTML = '';
            
            pendingOrders.forEach(order => {
                const deliveryCard = document.createElement('div');
                deliveryCard.className = 'customer-product-card';
                
                deliveryCard.innerHTML = `
                    <h4>${order.product}</h4>
                    <p style="color: var(--gray); margin: 10px 0;"><strong>From:</strong> ${order.pickupLocation || 'Nairobi Store'}</p>
                    <p style="color: var(--gray); margin: 10px 0;"><strong>To:</strong> ${order.deliveryAddress}</p>
                    <p style="color: var(--gray); margin: 10px 0;"><strong>Delivery Fee:</strong> KSh ${order.deliveryFee}</p>
                    <p style="color: var(--gray); margin: 10px 0;"><strong>Distance:</strong> ${getRandomDistance()} km</p>
                    <div class="customer-product-actions">
                        <button class="btn btn-primary" onclick="acceptDelivery('${order.id}')">
                            <i class="fas fa-check"></i> Accept Delivery
                        </button>
                        <button class="btn btn-outline" onclick="viewDeliveryDetails('${order.id}')">
                            <i class="fas fa-eye"></i> Details
                        </button>
                    </div>
                `;
                
                deliveriesContainer.appendChild(deliveryCard);
            });
        }

        function loadActiveDelivery(riderOrders) {
            const activeSection = document.getElementById('active-delivery-section');
            const activeContainer = document.getElementById('active-delivery');
            
            const activeOrder = riderOrders.find(order => 
                order.status === 'accepted' || order.status === 'picked'
            );
            
            if (!activeOrder) {
                activeSection.style.display = 'none';
                return;
            }
            
            activeSection.style.display = 'block';
            activeContainer.innerHTML = `
                <div class="customer-product-card">
                    <h4>${activeOrder.product}</h4>
                    <p style="color: var(--gray); margin: 10px 0;"><strong>Customer:</strong> ${activeOrder.customerName}</p>
                    <p style="color: var(--gray); margin: 10px 0;"><strong>Phone:</strong> ${activeOrder.customerPhone}</p>
                    <p style="color: var(--gray); margin: 10px 0;"><strong>Delivery Address:</strong> ${activeOrder.deliveryAddress}</p>
                    <p style="color: var(--gray); margin: 10px 0;"><strong>Instructions:</strong> ${activeOrder.deliveryNotes || 'None'}</p>
                    
                    <div class="tracking-steps">
                        <div class="tracking-step">
                            <div class="step-icon ${activeOrder.status === 'accepted' ? 'active' : 'completed'}">
                                <i class="fas fa-check"></i>
                            </div>
                            <div class="step-label">Accepted</div>
                        </div>
                        <div class="tracking-step">
                            <div class="step-icon ${activeOrder.status === 'picked' ? 'active' : ''}">
                                <i class="fas fa-box"></i>
                            </div>
                            <div class="step-label">Picked Up</div>
                        </div>
                        <div class="tracking-step">
                            <div class="step-icon">
                                <i class="fas fa-home"></i>
                            </div>
                            <div class="step-label">Delivered</div>
                        </div>
                    </div>
                    
                    <div class="customer-product-actions">
                        ${activeOrder.status === 'accepted' ? 
                            `<button class="btn btn-primary" onclick="updateDeliveryStatus('${activeOrder.id}', 'picked')">
                                <i class="fas fa-box"></i> Mark as Picked Up
                            </button>` : 
                            `<button class="btn btn-success" onclick="completeDelivery('${activeOrder.id}')">
                                <i class="fas fa-check-circle"></i> Mark as Delivered
                            </button>`
                        }
                        <button class="btn btn-outline" onclick="contactCustomer('${activeOrder.customerPhone}')">
                            <i class="fas fa-phone"></i> Call Customer
                        </button>
                    </div>
                </div>
            `;
        }

        // ========== ORDER MANAGEMENT ==========
        function orderProduct(productId) {
            if (!currentUser) {
                showNotification('Please login to place an order', 'error');
                showAuthModal('login');
                return;
            }

            const product = products.find(p => p.id === productId);
            if (!product) return;

            currentOrder = product;
            showOrderModal(product);
        }

        function showOrderModal(product) {
            const orderModal = document.getElementById('order-modal');
            const productInfo = document.getElementById('order-product-info');
            const orderTotal = document.getElementById('order-total');
            
            const total = product.price + product.deliveryFee;
            
            productInfo.innerHTML = `
                <div style="display: flex; gap: 15px; align-items: center; margin-bottom: 20px; padding: 15px; background: var(--light); border-radius: 8px;">
                    <div style="font-size: 48px;">${product.image}</div>
                    <div>
                        <h4 style="margin: 0 0 5px 0;">${product.name}</h4>
                        <p style="color: var(--gray); margin: 0; font-size: 14px;">${product.description}</p>
                        <p style="color: var(--primary); font-weight: bold; margin: 5px 0;">KSh ${product.price.toLocaleString()}</p>
                    </div>
                </div>
                <div style="background: var(--success); color: white; padding: 10px 15px; border-radius: 8px; margin-bottom: 15px;">
                    <i class="fas fa-clock"></i> Estimated delivery: ${product.estimatedTime}
                </div>
            `;
            
            orderTotal.textContent = total.toLocaleString();
            orderModal.style.display = 'flex';
            
            // Auto-fill address with random Nairobi area
            const randomArea = nairobiAreas[Math.floor(Math.random() * nairobiAreas.length)];
            document.getElementById('delivery-address').value = `${randomArea}, Nairobi`;
        }

        function hideOrderModal() {
            document.getElementById('order-modal').style.display = 'none';
            currentOrder = null;
            selectedPaymentMethod = 'cash';
            document.getElementById('delivery-address').value = '';
            document.getElementById('delivery-notes').value = '';
        }

        function selectPayment(method) {
            selectedPaymentMethod = method;
            document.querySelectorAll('.btn-outline').forEach(btn => {
                btn.style.background = 'transparent';
                btn.style.color = 'var(--primary)';
            });
            event.target.style.background = 'var(--primary)';
            event.target.style.color = 'white';
        }

        function handleOrderConfirmation() {
            if (!currentOrder || !currentUser) {
                showNotification('Please select a product and ensure you are logged in', 'error');
                return;
            }

            const deliveryAddress = document.getElementById('delivery-address').value;
            const deliveryNotes = document.getElementById('delivery-notes').value;

            if (!deliveryAddress) {
                showNotification('Please enter delivery address', 'error');
                return;
            }

            // Create order
            const order = {
                id: 'HD' + Date.now().toString().slice(-6),
                customerId: currentUser.id,
                customerName: currentUser.name,
                customerPhone: currentUser.phone,
                product: currentOrder.name,
                productId: currentOrder.id,
                price: currentOrder.price,
                deliveryFee: currentOrder.deliveryFee,
                total: currentOrder.price + currentOrder.deliveryFee,
                status: 'pending',
                paymentMethod: selectedPaymentMethod,
                deliveryAddress: deliveryAddress,
                deliveryNotes: deliveryNotes,
                estimatedTime: currentOrder.estimatedTime,
                pickupLocation: getRandomNairobiLocation(),
                createdAt: new Date().toISOString(),
                riderId: null,
                rider: null,
                tracking: [
                    {
                        status: 'ordered',
                        timestamp: new Date().toISOString(),
                        message: 'Order placed successfully'
                    }
                ]
            };

            // Save order
            const orders = JSON.parse(localStorage.getItem('harakaOrders') || '[]');
            orders.push(order);
            localStorage.setItem('harakaOrders', JSON.stringify(orders));

            hideOrderModal();
            
            Swal.fire({
                title: 'Order Placed Successfully! üéâ',
                html: `
                    <div style="text-align: left;">
                        <p><strong>Order ID:</strong> ${order.id}</p>
                        <p><strong>Product:</strong> ${order.product}</p>
                        <p><strong>Total Amount:</strong> KSh ${order.total.toLocaleString()}</p>
                        <p><strong>Delivery Address:</strong> ${order.deliveryAddress}</p>
                        <p><strong>Estimated Delivery:</strong> ${order.estimatedTime}</p>
                        <p><strong>Payment Method:</strong> ${order.paymentMethod === 'mpesa' ? 'M-Pesa' : 'Cash on Delivery'}</p>
                    </div>
                    <p style="margin-top: 20px; color: var(--success);">A rider will be assigned to your order shortly!</p>
                `,
                icon: 'success',
                confirmButtonText: 'Track My Order'
            });

            // Refresh dashboard
            if (currentRole === 'customer') {
                loadCustomerDashboard();
            }
        }

        function acceptDelivery(orderId) {
            Swal.fire({
                title: 'Accept Delivery?',
                html: `
                    <p>You are about to accept this delivery order.</p>
                    <p><strong>You will earn:</strong> KSh ${getDeliveryFee(orderId)}</p>
                    <p>Confirm to proceed.</p>
                `,
                icon: 'question',
                showCancelButton: true,
                confirmButtonText: 'Accept Delivery',
                cancelButtonText: 'Cancel'
            }).then((result) => {
                if (result.isConfirmed) {
                    // Update order status
                    const orders = JSON.parse(localStorage.getItem('harakaOrders') || '[]');
                    const orderIndex = orders.findIndex(order => order.id === orderId);
                    
                    if (orderIndex !== -1) {
                        orders[orderIndex].status = 'accepted';
                        orders[orderIndex].riderId = currentUser.id;
                        orders[orderIndex].rider = currentUser.name;
                        orders[orderIndex].acceptedAt = new Date().toISOString();
                        orders[orderIndex].tracking.push({
                            status: 'accepted',
                            timestamp: new Date().toISOString(),
                            message: `Rider ${currentUser.name} accepted the delivery`
                        });
                        
                        localStorage.setItem('harakaOrders', JSON.stringify(orders));
                        showNotification('Delivery accepted! Proceed to pickup location.', 'success');
                        loadRiderDashboard();
                    }
                }
            });
        }

        function updateDeliveryStatus(orderId, status) {
            const orders = JSON.parse(localStorage.getItem('harakaOrders') || '[]');
            const orderIndex = orders.findIndex(order => order.id === orderId);
            
            if (orderIndex !== -1) {
                orders[orderIndex].status = status;
                const statusMessage = status === 'picked' ? 'picked up from store' : 'accepted';
                orders[orderIndex].tracking.push({
                    status: status,
                    timestamp: new Date().toISOString(),
                    message: `Order ${statusMessage} by rider`
                });
                
                localStorage.setItem('harakaOrders', JSON.stringify(orders));
                showNotification(`Order marked as ${status === 'picked' ? 'picked up' : 'accepted'}`, 'success');
                loadRiderDashboard();
            }
        }

        function completeDelivery(orderId) {
            Swal.fire({
                title: 'Complete Delivery?',
                text: 'Mark this delivery as completed and receive payment.',
                icon: 'question',
                showCancelButton: true,
                confirmButtonText: 'Yes, Complete',
                cancelButtonText: 'Cancel'
            }).then((result) => {
                if (result.isConfirmed) {
                    const orders = JSON.parse(localStorage.getItem('harakaOrders') || '[]');
                    const orderIndex = orders.findIndex(order => order.id === orderId);
                    
                    if (orderIndex !== -1) {
                        orders[orderIndex].status = 'delivered';
                        orders[orderIndex].deliveredAt = new Date().toISOString();
                        orders[orderIndex].tracking.push({
                            status: 'delivered',
                            timestamp: new Date().toISOString(),
                            message: 'Order delivered successfully to customer'
                        });
                        
                        // Update rider earnings
                        const riders = JSON.parse(localStorage.getItem('harakaRiders') || '[]');
                        const riderIndex = riders.findIndex(rider => rider.id === currentUser.id);
                        if (riderIndex !== -1) {
                            riders[riderIndex].deliveriesCompleted += 1;
                            riders[riderIndex].totalEarnings += orders[orderIndex].deliveryFee;
                            localStorage.setItem('harakaRiders', JSON.stringify(riders));
                        }
                        
                        localStorage.setItem('harakaOrders', JSON.stringify(orders));
                        showNotification('Delivery completed! Payment has been recorded.', 'success');
                        loadRiderDashboard();
                    }
                }
            });
        }

        function viewOrderDetails(orderId) {
            const orders = JSON.parse(localStorage.getItem('harakaOrders') || '[]');
            const order = orders.find(o => o.id === orderId);
            
            if (order) {
                let trackingHTML = '';
                order.tracking.forEach(track => {
                    trackingHTML += `
                        <div style="display: flex; gap: 10px; margin: 10px 0; padding: 10px; background: var(--light); border-radius: 8px;">
                            <div style="min-width: 100px;">
                                <span class="status-badge status-${track.status}">${track.status}</span>
                            </div>
                            <div style="flex: 1;">
                                <p style="margin: 0; font-size: 14px;">${track.message}</p>
                                <p style="margin: 5px 0 0 0; font-size: 12px; color: var(--gray);">${formatDate(track.timestamp)}</p>
                            </div>
                        </div>
                    `;
                });
                
                Swal.fire({
                    title: `Order ${orderId}`,
                    html: `
                        <div style="text-align: left;">
                            <div style="background: var(--light); padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                                <h4 style="margin: 0 0 10px 0;">${order.product}</h4>
                                <p style="margin: 5px 0;"><strong>Status:</strong> <span class="status-badge status-${order.status}">${order.status}</span></p>
                                <p style="margin: 5px 0;"><strong>Total:</strong> KSh ${order.total.toLocaleString()}</p>
                                <p style="margin: 5px 0;"><strong>Payment:</strong> ${order.paymentMethod === 'mpesa' ? 'M-Pesa' : 'Cash'}</p>
                            </div>
                            
                            <div style="margin-bottom: 15px;">
                                <h5>Delivery Information</h5>
                                <p style="margin: 5px 0;"><strong>Address:</strong> ${order.deliveryAddress}</p>
                                <p style="margin: 5px 0;"><strong>Instructions:</strong> ${order.deliveryNotes || 'None'}</p>
                                ${order.rider ? `<p style="margin: 5px 0;"><strong>Assigned Rider:</strong> ${order.rider}</p>` : ''}
                            </div>
                            
                            <div>
                                <h5>Order Tracking</h5>
                                ${trackingHTML}
                            </div>
                        </div>
                    `,
                    width: 600,
                    confirmButtonText: 'Close'
                });
            }
        }

        function viewDeliveryDetails(orderId) {
            const orders = JSON.parse(localStorage.getItem('harakaOrders') || '[]');
            const order = orders.find(o => o.id === orderId);
            
            if (order) {
                Swal.fire({
                    title: `Delivery Details - ${orderId}`,
                    html: `
                        <div style="text-align: left;">
                            <p><strong>Product:</strong> ${order.product}</p>
                            <p><strong>Customer:</strong> ${order.customerName}</p>
                            <p><strong>Phone:</strong> ${order.customerPhone}</p>
                            <p><strong>Delivery Address:</strong> ${order.deliveryAddress}</p>
                            <p><strong>Pickup Location:</strong> ${order.pickupLocation}</p>
                            <p><strong>Special Instructions:</strong> ${order.deliveryNotes || 'None'}</p>
                            <p><strong>Delivery Fee:</strong> KSh ${order.deliveryFee}</p>
                            <p><strong>Total Order Value:</strong> KSh ${order.total.toLocaleString()}</p>
                            <p><strong>Payment Method:</strong> ${order.paymentMethod === 'mpesa' ? 'M-Pesa' : 'Cash on Delivery'}</p>
                        </div>
                    `,
                    confirmButtonText: 'Close'
                });
            }
        }

        function contactCustomer(phone) {
            window.open(`tel:${phone}`, '_self');
        }

        function viewProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            Swal.fire({
                title: product.name,
                html: `
                    <div style="text-align: left;">
                        <div style="text-align: center; font-size: 64px; margin: 20px 0;">${product.image}</div>
                        <p><strong>Description:</strong> ${product.description}</p>
                        <p><strong>Price:</strong> KSh ${product.price.toLocaleString()}</p>
                        <p><strong>Delivery Fee:</strong> KSh ${product.deliveryFee}</p>
                        <p><strong>Total:</strong> KSh ${(product.price + product.deliveryFee).toLocaleString()}</p>
                        <p><strong>Estimated Delivery:</strong> ${product.estimatedTime}</p>
                        <p><strong>Category:</strong> ${product.category.charAt(0).toUpperCase() + product.category.slice(1)}</p>
                    </div>
                `,
                confirmButtonText: 'Order Now',
                showCancelButton: true,
                cancelButtonText: 'Close'
            }).then((result) => {
                if (result.isConfirmed) {
                    orderProduct(productId);
                }
            });
        }

        // ========== CHAT FUNCTIONS ==========
        function toggleChat() {
            chatOpen = !chatOpen;
            const chatContainer = document.getElementById('chatContainer');
            if (chatOpen) {
                chatContainer.classList.add('open');
            } else {
                chatContainer.classList.remove('open');
            }
        }

        function addChatMessage(sender, message) {
            const messageElement = document.createElement('div');
            messageElement.className = `message ${sender}`;
            messageElement.textContent = message;
            document.getElementById('chatMessages').appendChild(messageElement);
            document.getElementById('chatMessages').scrollTop = document.getElementById('chatMessages').scrollHeight;
        }

        function sendChatMessage() {
            const messageInput = document.getElementById('chatInput');
            const message = messageInput.value.trim();
            
            if (!message) return;
            
            addChatMessage('user', message);
            messageInput.value = '';
            
            // Simulate support response
            setTimeout(() => {
                const responses = [
                    "I understand. Our delivery team will contact you shortly to confirm your order details.",
                    "Thank you for your inquiry. Most deliveries in Nairobi are completed within 30-45 minutes.",
                    "I can help you track your order. Please provide your order ID for assistance.",
                    "For urgent deliveries, we recommend our express service which guarantees delivery within 25 minutes.",
                    "Our support team is available 24/7. You can also call +254 748 894 671 for immediate assistance.",
                    "I've noted your concern. Our rider will contact you before delivery for any special instructions."
                ];
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                addChatMessage('bot', randomResponse);
            }, 1000);
        }

        // ========== UTILITY FUNCTIONS ==========
        function getDeliveryFee(orderId) {
            const orders = JSON.parse(localStorage.getItem('harakaOrders') || '[]');
            const order = orders.find(o => o.id === orderId);
            return order ? order.deliveryFee : 0;
        }

        function getRandomNairobiLocation() {
            return nairobiAreas[Math.floor(Math.random() * nairobiAreas.length)] + ' Store';
        }

        function getRandomDistance() {
            return (Math.random() * 10 + 2).toFixed(1);
        }

        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-KE', {
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        function isToday(date) {
            const today = new Date();
            return date.getDate() === today.getDate() &&
                   date.getMonth() === today.getMonth() &&
                   date.getFullYear() === today.getFullYear();
        }

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            window.scrollTo(0, 0);
        }

        function showAuthModal(defaultTab = 'login') {
            document.getElementById('auth-modal').style.display = 'flex';
            switchAuthTab(defaultTab);
        }

        function hideAuthModal() {
            document.getElementById('auth-modal').style.display = 'none';
            document.getElementById('login-email').value = '';
            document.getElementById('login-password').value = '';
            document.getElementById('signup-name').value = '';
            document.getElementById('signup-email').value = '';
            document.getElementById('signup-password').value = '';
            document.getElementById('signup-phone').value = '';
        }

        function switchAuthTab(tabName) {
            document.querySelectorAll('.auth-tab').forEach(tab => {
                tab.classList.toggle('active', tab.getAttribute('data-tab') === tabName);
            });
            document.getElementById('login-form').classList.toggle('active', tabName === 'login');
            document.getElementById('signup-form').classList.toggle('active', tabName === 'signup');
        }

        function showNotification(message, type = 'success') {
            const notificationArea = document.getElementById('notificationArea');
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            
            const icon = type === 'error' ? 'fas fa-exclamation-circle' : 'fas fa-check-circle';
            notification.innerHTML = `<i class="${icon}"></i><span>${message}</span>`;
            
            notificationArea.appendChild(notification);
            
            setTimeout(() => notification.classList.add('show'), 100);
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => notification.remove(), 300);
            }, 4000);
        }

        function toggleMobileMenu() {
            const navLinks = document.querySelector('.nav-links');
            const authButtons = document.querySelector('.auth-buttons');
            const isVisible = navLinks.style.display === 'flex';
            
            navLinks.style.display = isVisible ? 'none' : 'flex';
            authButtons.style.display = isVisible ? 'none' : 'flex';
            
            if (!isVisible) {
                navLinks.style.flexDirection = 'column';
                authButtons.style.flexDirection = 'column';
                navLinks.style.position = 'absolute';
                navLinks.style.top = '100%';
                navLinks.style.left = '0';
                navLinks.style.right = '0';
                navLinks.style.background = 'white';
                navLinks.style.padding = '20px';
                navLinks.style.boxShadow = '0 4px 12px rgba(0,0,0,0.1)';
            }
        }

        // Smooth scrolling for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                if (targetId === '#') return;
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 80,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Help Center page function
        function showPage(pageId) {
            if (pageId === 'help-center') {
                Swal.fire({
                    title: 'Help Center',
                    html: `
                        <div style="text-align: left;">
                            <h4>Frequently Asked Questions</h4>
                            <p><strong>Q: How fast is delivery?</strong><br>A: Most deliveries in Nairobi take 30-45 minutes.</p>
                            <p><strong>Q: What areas do you cover?</strong><br>A: We cover all major areas in Nairobi including Westlands, CBD, Karen, Langata, and more.</p>
                            <p><strong>Q: How do I pay?</strong><br>A: You can pay via M-Pesa or cash on delivery.</p>
                            <p><strong>Q: Can I track my order?</strong><br>A: Yes, you can track your order in real-time from your dashboard.</p>
                            <p><strong>Q: How do I become a rider?</strong><br>A: Sign up as a rider and complete the verification process.</p>
                            <hr>
                            <p><strong>Need more help?</strong><br>Call us: +254 748 894 671<br>Email: support@harakadeliveries.com</p>
                        </div>
                    `,
                    width: 600,
                    confirmButtonText: 'Close'
                });
                return;
            }
            
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            window.scrollTo(0, 0);
        }
    </script>
</body>
</html>